<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="/style.css">
	<title>Soccer</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://static.codehs.com/gulp/a207eaf74c9a65ef1504f82657de97532616341f/chs-js-lib/chs.js"></script>
</head>
<body>
	<header id = "header">(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Header
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </header> <br> <br> <br>
	<h2>Soccer: WASD&SPACE, ARROWS&NUMPAD0<br> </h2>
	
	<p align = "center">
		<input id = "start" type = "button" value = "Start" onclick = "start()"> <br> <br>
		<canvas width="1000" height="600" class="codehs-editor-canvas" style="background-color:#33cc33"></canvas>
	</p>
	
<script>
function start() {
	removeAll(); // clear canvas
	stopAllTimers();
	// GREEN BACKGROUND : (51, 204, 51) || #33CC33
	// GREEN GOAL: (55, 249, 68) || #37F944
	
	var gWidth = 50, gHeight = 100, eWidth = 150, eHeight = 300;
	var lp, rp, lDir, rDir; // left & right players
	var lPoints = 0, rPoints = 0;
	var lColor = Color.red, rColor = Color.blue;
	var playerSize = 10;
	var moveSpace = 20;
	var socBall, socBallSize = 5, socBallBorder = 3, socBallDir, socBallSpeedX, socBallSpeedY, socRolls = 1;
	
	map();
	keyDownMethod(move);
	
	function map() {
		var centerLine = new Line(getWidth()/2, 0, getWidth()/2, getHeight());
		centerLine.setColor(Color.white);
		centerLine.setLineWidth(5);
		var centerCircle = new Circle(50);
		centerCircle.setPosition(getWidth()/2, getHeight()/2);
		centerCircle.setColor(new Color(51, 204, 51));
		centerCircle.setBorderColor(Color.white);
		centerCircle.setBorderWidth(10);
		add(centerCircle);
		add(centerLine);
		var leftG, leftEdge, rightG, rightEdge;
		leftG = new Rectangle(gWidth, gHeight); rightG = new Rectangle(gWidth, gHeight);
		leftG.setPosition(0, getHeight()/2 - gHeight/2); rightG.setPosition(getWidth() - gWidth, getHeight()/2 - gHeight/2);
		leftG.setColor(new Color(55, 249, 68)); rightG.setColor(new Color(55, 249, 68)); // different shade green
		leftG.setBorderColor(Color.white); rightG.setBorderColor(Color.white);
		leftG.setBorderWidth(10); rightG.setBorderWidth(10);
		leftEdge = new Rectangle(eWidth, eHeight); rightEdge = new Rectangle(eWidth, eHeight);
		leftEdge.setPosition(0, getHeight()/2 - eHeight/2); rightEdge.setPosition(getWidth() - eWidth, getHeight()/2 - eHeight/2);
		leftEdge.setColor(new Color(51, 204, 51)); rightEdge.setColor(new Color(51, 204, 51));
		leftEdge.setBorderColor(Color.white); rightEdge.setBorderColor(Color.white);
		leftEdge.setBorderWidth(10); rightEdge.setBorderWidth(10);
		add(leftEdge); add(rightEdge);
		add(leftG); add(rightG);
		lp = new Circle(playerSize); rp = new Circle(playerSize);
		lp.setPosition(eWidth + playerSize, getHeight()/2); rp.setPosition(getWidth() - eWidth - playerSize, getHeight()/2);
		lp.setColor(lColor); rp.setColor(rColor);
		add(lp); add(rp);
		socBall = new Circle(socBallSize); socBall.setPosition(getWidth()/2, getHeight()/2);
		socBall.setColor(Color.black); socBall.setBorderColor(Color.white); socBall.setBorderWidth(socBallBorder);
		add(socBall);
	}
	
	function move(e) {
		if (e.keyCode == Keyboard.letter('A')) { // LEFT move LEFT
			if (lp.getX() - moveSpace > 0) {
				lDir = "LEFT";
				lp.move(-moveSpace, 0); 
			}
		}
		if (e.keyCode == Keyboard.letter('W')) { // LEFT move UP
			if (lp.getY() - moveSpace > 0) {
				lDir = "UP";
				lp.move(0, -moveSpace); 
			}
		}
		if (e.keyCode == Keyboard.letter('D')) { // LEFT move RIGHT (cannot pass goal lines)
			if (lp.getX() + moveSpace < getWidth() - eWidth) {
				lDir = "RIGHT";
				lp.move(moveSpace, 0); 
			}
		}
		if (e.keyCode == Keyboard.letter('S')) { // LEFT move DOWN
			if (lp.getY() + moveSpace < getHeight()) {
				lDir = "DOWN";
				lp.move(0, moveSpace);
			}
		}
		if (e.keyCode == Keyboard.SPACE) { // LEFT KICK
			kick("LEFT");
		}
		if (e.keyCode == Keyboard.LEFT) { // RIGHT move LEFT (cannot pass goal lines)
			if (rp.getX() - moveSpace > 0 + eWidth) {
				rDir = "LEFT";
				rp.move(-moveSpace, 0); 
			}
		}
		if (e.keyCode == Keyboard.UP) { // RIGHT move UP
			if (rp.getY() - moveSpace > 0) {
				rDir = "UP";
				rp.move(0, -moveSpace); 
			}
		}
		if (e.keyCode == Keyboard.RIGHT) { // RIGHT move RIGHT
			if (rp.getX() + moveSpace < getWidth()) {
				rDir = "RIGHT";
				rp.move(moveSpace, 0); 
			}
		}
		if (e.keyCode == Keyboard.DOWN) { // RIGHT move DOWN
			if (rp.getY() + moveSpace < getHeight()) {
				rDir = "DOWN";
				rp.move(0, moveSpace);
			}
		}	
		if (e.keyCode == "96") { // RIGHT KICK    //"96" is NUMPAD_0
			kick("RIGHT");
		}
	}
	
	function kick(playerTag) {
		var player, playerDir;
		if (playerTag == "LEFT") { player = lp; playerDir = lDir; }
		else if (playerTag == "RIGHT") { player = rp; playerDir = rDir; }
		if ((player.getX() == socBall.getX()) && (player.getY() == socBall.getY())) {
			if (playerDir == "LEFT") {
				socBallDir = "LEFT";
				socBallSpeedX = -moveSpace*2; socBallSpeedY = 0; 
			}
			else if (playerDir == "UP") {
				socBallDir = "UP";
				socBallSpeedX = 0; socBallSpeedY = -moveSpace*2;
			}
			else if (playerDir == "RIGHT") {
				socBallDir = "RIGHT";
				socBallSpeedX = moveSpace*2; socBallSpeedY = 0;
			}
			else if (playerDir == "DOWN") {
				socBallDir = "DOWN";
				socBallSpeedX = 0; socBallSpeedY = moveSpace*2;
			}
			ballMove();
		}
	}
	function ballMove() {
		var DELAY = 100;
		//socRolls = Randomizer.nextInt(1, 5);
		if (socBallDir == "LEFT") {
			if (socBall.getX() - socBallSpeedX > 0) {
				socBall.move(socBallSpeedX, socBallSpeedY);
				for (var i = 0; i < socRolls; i++) {
					setTimeout(function() {
						if (socBall.getX() - moveSpace > 0)
							socBall.move(socBallSpeedX, socBallSpeedY);
						else {
							socBallSpeedX = -socBallSpeedX;
							socBall.move(socBallSpeedX, socBallSpeedY);
						}
					}, DELAY);
				}
			}
		}
		else if (socBallDir == "UP") {
			if (socBall.getY() - socBallSpeedY > 0) {
				socBall.move(socBallSpeedX, socBallSpeedY);
				for (var i = 0; i < socRolls; i++) {
					setTimeout(function() {
						if (socBall.getY() - moveSpace > 0)
							socBall.move(socBallSpeedX, socBallSpeedY);
						else {
							socBallSpeedY = -socBallSpeedY;
							socBall.move(socBallSpeedX, socBallSpeedY);
						}
					}, DELAY);
				}
			}
		}
		else if (socBallDir == "RIGHT") {
			if (socBall.getX() + socBallSpeedX < getWidth()) {
				socBall.move(socBallSpeedX, socBallSpeedY);
				checkGoal();
				for (var i = 0; i < socRolls; i++) {
					setTimeout(function() {
						if (socBall.getX() + moveSpace < getWidth())
							socBall.move(socBallSpeedX, socBallSpeedY);
						else {
							socBallSpeedX = -socBallSpeedX;
							socBall.move(socBallSpeedX, socBallSpeedY);
						}
						checkGoal();
					}, DELAY);
				}
			}
			  
		}
		else if (socBallDir == "DOWN") {
			if (socBall.getY() + socBallSpeedY < getHeight()) {
				socBall.move(socBallSpeedX, socBallSpeedY);
				checkGoal();
				for (var i = 0; i < socRolls; i++) {
					setTimeout(function() {
						if (socBall.getY() + moveSpace < getHeight())
							socBall.move(socBallSpeedX, socBallSpeedY);
						else {
							socBallSpeedY = -socBallSpeedY;
							socBall.move(socBallSpeedX, socBallSpeedY);
						}
						checkGoal();
					}, DELAY);
				}
			}
		}
	}
	function checkGoal() {
		var elm = getElementAt(socBall.getX(), socBall.getY());
		if (elm.getColor() == "#37F944") {
			remove(socBall);
			if (socBall.getX() < gWidth) { // RIGHT scores GOAL
				socBall.setPosition(getWidth()/2, getHeight()/2);
				rPoints++;
				add(socBall);
			}
			else if (socBall.getX() > getWidth() - gWidth) { // LEFT scores GOAL
				socBall.setPosition(getWidth()/2, getHeight()/2);
				lPoints++;
				add(socBall);
			}
		}
	}
}	
</script>
	
	<br> <br> <br>
	<footer>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Footer
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </footer> 
</body>
</html>
