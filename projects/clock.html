<html>
<head>
	<link rel="stylesheet" href="/style.css">
	<title>Clock</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://static.codehs.com/gulp/a207eaf74c9a65ef1504f82657de97532616341f/chs-js-lib/chs.js"></script>
</head>
<body>
	<header>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Header
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </header> <br> <br>
	<br>
	<p align = "center">
		<canvas width="400" height="400" class="codehs-editor-canvas" style="background-color:black"></canvas>
	</p>
	
<script>
window.onload = function() {
	removeAll();
	var nowTime, clock, clockHandsArray = [];
	var allColor = Color.white;
	var timeOfDay; // DAY/NIGHT (change background to reflect) ?
	var BUFFER = 10;
	
	function start() {
		displayTime();
		setTimer(displayTime, 1000);
	}
	
	function displayTime() {
		removeAll();
		nowTime = new Date();
		var AMPM; if (nowTime.getHours() < 12) AMPM = " AM"; else AMPM = " PM";
		var date = new Text (nowTime.getDate() + " " + month(nowTime.getMonth()) + " " + nowTime.getFullYear() 
							 + "  " + hour(nowTime.getHours()) + ":" + time00(nowTime.getMinutes()) 
							 + ":" + time00(nowTime.getSeconds()) + AMPM);
		date.setPosition(getWidth()/2 - date.getWidth()/2, date.getHeight() + BUFFER);
		date.setColor(allColor);
		add(date);
		displayClock(); // outline and tick markers
		clockHands(nowTime.getHours(), nowTime.getMinutes(), nowTime.getSeconds());
	}
	function month(mh){
		var months = ["January", "February", "March", "April", "May", "June",
		             "July", "August", "November", "December"];
		return(months[mh]);
	}
	function hour(hs) {
		if (hs > 12) { timeOfDay = "NIGHT"; return hs-12; }
		else { timeOfDay = "DAY"; return hs; }
	}
	function time00(timeIn) {
		if (timeIn < 10) { return "0" + timeIn; }
		else { return timeIn; }
	}
	function displayClock() {
		clock = new Circle (150);
		clock.setBorderColor(allColor);
		clock.setBorderWidth(10);
		clock.setPosition(getWidth()/2, getHeight()/2 + BUFFER);
		add(clock);
		var topClock = getHeight()/2 + BUFFER - clock.getRadius(), botClock = getHeight()/2 + BUFFER + clock.getRadius();
		var leftClock = getWidth()/2 - clock.getRadius(), rightClock = getWidth()/2 + clock.getRadius();
		
		for (var i = 0; i < 60; i++) {
			var endX = 0;
			var endY = 0;
			if (i >= 0 && i < 15) { endX = clock.getX() + clock.getRadius()*i/15; endY = topClock + clock.getRadius()*i/15; }
			else if (i >= 15 && i < 30) { endX = rightClock - clock.getRadius()*(i-15)/15; endY = clock.getY() + clock.getRadius()*(i-15)/15; }
			else if (i >= 30 && i < 45) { endX = clock.getX() - clock.getRadius()*(i-30)/15; endY = botClock - clock.getRadius()*(i-30)/15; }
			else if (i >= 45 && i < 60) { endX = leftClock + clock.getRadius()*(i-45)/15; endY = clock.getY() - clock.getRadius()*(i-45)/15; }
			clockHandsArray[i] = new Line(clock.getX(), clock.getY(), endX, endY);
		}
		// ADD TICK MARKERS (1 to 12)
	}
	function clockHands(hrs, mins, secs) {
		if (hrs > 12) { hrs = hrs - 12 };
		var hourHand = clockHandsArray[hrs*5];
		var minHand = clockHandsArray[mins];
		var secHand = clockHandsArray[secs];
		hourHand.setColor(allColor); minHand.setColor(new Color(169,169,169)); secHand.setColor(new Color(112,112,112));
		hourHand.setLineWidth(5); minHand.setLineWidth(5); secHand.setLineWidth(5);
		add(hourHand); add(minHand); add(secHand);
	}
	
	if (typeof start === 'function') {
        	start();
    	}
}
</script>
	
	<br> <br> <br>
	<footer>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Footer
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </footer> 
</body>
</html>
