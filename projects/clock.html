<html>
<head>
	<link rel="stylesheet" href="/style.css">
	<title>Clock</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://static.codehs.com/gulp/a207eaf74c9a65ef1504f82657de97532616341f/chs-js-lib/chs.js"></script>
</head>
<body>
	<header>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Header
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </header> <br> <br>
	<br>
	<p align = "center">
		<canvas width="400" height="400" class="codehs-editor-canvas" style="background-color:black"></canvas>
	</p>
	
<script>
window.onload = function() {
	removeAll();
	var nowTime, clock;
	var allColor = Color.white;
	var timeOfDay; // DAY/NIGHT (change background to reflect) ?
	var BUFFER = 10;
	
	function start() {
		displayTime();
		setTimer(displayTime, 1000);
	}
	
	function displayTime() {
		removeAll();
		nowTime = new Date();
		var AMPM; if (nowTime.getHours() < 12) AMPM = " AM"; else AMPM = " PM";
		var date = new Text (nowTime.getDate() + " " + month(nowTime.getMonth()) + " " + nowTime.getFullYear() 
							 + "  " + hour(nowTime.getHours()) + ":" + time00(nowTime.getMinutes()) 
							 + ":" + time00(nowTime.getSeconds()) + AMPM);
		date.setPosition(getWidth()/2 - date.getWidth()/2, date.getHeight() + BUFFER);
		date.setColor(allColor);
		add(date);
		displayClock(); // outline and tick markers
		clockHands(nowTime.getHours(), nowTime.getMinutes(), nowTime.getSeconds());
	}
	function month(mh){
		var months = ["January", "February", "March", "April", "May", "June",
		             "July", "August", "November", "December"];
		return(months[mh]);
	}
	function hour(hs) {
		if (hs > 12) { timeOfDay = "NIGHT"; return hs-12; }
		else { timeOfDay = "DAY"; return hs; }
	}
	function time00(timeIn) {
		if (timeIn < 10) { return "0" + timeIn; }
		else { return timeIn; }
	}
	function displayClock() {
		clock = new Circle (150);
		clock.setBorderColor(allColor);
		clock.setBorderWidth(10);
		clock.setPosition(getWidth()/2, getHeight()/2 + BUFFER);
		add(clock);
		var topClock = getHeight()/2 + BUFFER - clock.getRadius(), botClock = getHeight()/2 + BUFFER + clock.getRadius();
		var leftClock = getWidth()/2 - clock.getRadius(), rightClock = getWidth()/2 + clock.getRadius();
		
		/* FIX TICK MARKERS 
		for (var i = 0; i < 12; i++) {
			var tickX, tickY, xDir, yDir, tickLength = 20;
			// X VALUE
			if (i == 9) { tickX = leftClock; }
			else if (i == 10 || i == 8) { tickX = leftClock + clock.getRadius() * 1/3; }
			else if (i == 11 || i == 7) { tickX = leftClock + clock.getRadius() * 2/3; }
			else if (i == 0 || i == 6) { tickX = getWidth()/2; }
			else if (i == 1 || i == 5) { tickX = rightClock - clock.getRadius() * 2/3; }
			else if (i == 2 || i == 4) { tickX = rightClock - clock.getRadius() * 1/3; }
			else if (i == 3) { tickX = rightClock; }
			if (i == 7 || i == 8 || i == 3 || i == 10 || i == 11) { xDir = tickX - tickLength; }	
			else if (i == 1 || i == 2 || i == 9 || i == 4 || i == 5) { xDir = tickX + tickLength; }
			else if (i == 0 || i == 6) { xDir = tickX; }
			// Y VALUE
			if (i == 0) { tickY = topClock; }
			else if (i == 11 || i == 1) { tickY = topClock + clock.getRadius() * 1/3; } 
			else if (i == 10 || i == 2) { tickY = topClock + clock.getRadius() * 2/3; }
			else if (i == 9 || i == 3) { tickY = getHeight()/2 + BUFFER }
			else if (i == 8 || i == 4) { tickY = botClock - clock.getRadius() * 2/3; }
			else if (i == 7 || i == 5) { tickY = botClock - clock.getRadius() * 1/3; }
			else if (i == 6) { tickY = botClock; }
			if (i == 10 || i == 11 || i == 6 || i == 1 || i == 2) { yDir = tickY - tickLength; }
			else if (i == 8 || i == 7 || i == 0 || i == 5 || i == 4) { yDir = tickY + tickLength; }
			else if (i == 9 || i == 3) { yDir = tickY; } 
			var tick = new Line (tickX, tickY, xDir, yDir);
			tick.setColor(allColor); tick.setLineWidth(5);	
			add(tick);
		}
		FIX TICK MARKERS */ 
	}
	function clockHands(hrs, mins, secs) {
		var topClock = getHeight()/2 + BUFFER - clock.getRadius(), botClock = getHeight()/2 + BUFFER + clock.getRadius();
		var leftClock = getWidth()/2 - clock.getRadius(), rightClock = getWidth()/2 + clock.getRadius();
		var hrDir = hrs - 12; 
		var minDir = (mins / 5); if (minDir == 12) { minDir = 0; }
		var secDir = (secs / 5); if (secDir == 12) { secDir = 0; }
		var hourHand = new Line(clock.getX(), botClock, clock.getX(), topClock);
		var minuteHand = new Line(clock.getX(), botClock, clock.getX(), topClock);
		var secondHand = new Line(clock.getX(), botClock, clock.getX(), topClock);
		hourHand.setColor(allColor); minuteHand.setColor(Color.gray); secondHand.setColor(Color.red);
		hourHand.setLineWidth(5); minuteHand.setLineWidth(5); secondHand.setLineWidth(3);
		hourHand.rotate(hrDir * 30); minuteHand.rotate(minDir * 30); secondHand.rotate(secDir * 30);
		add(hourHand); add(minuteHand); add(secondHand);
	}
	
	if (typeof start === 'function') {
        	start();
    	}
}
</script>
	
	<br> <br> <br>
	<footer>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Footer
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </footer> 
</body>
</html>
