<html>
<head>
	<link rel="stylesheet" href="/style.css">
	<title>Space Battle</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://static.codehs.com/gulp/a207eaf74c9a65ef1504f82657de97532616341f/chs-js-lib/chs.js"></script>
</head>
<body>
	<header id = "header">(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Header
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </header> <br> <br> <br>
	<h2>WASD/Arrows Movement<br></h2>
	
	<p align = "center">
		<input id = "start" type = "button" value = "Start" onclick = "start()"> <br> <br>
		<canvas width="500" height="500" class="codehs-editor-canvas" style="background-color:black"></canvas>
	</p>
	
<script>
function start() {
	removeAll(); // clear canvas
	
	// setFullscreen(); // create resizable full screen canvas

	var ship, centerShip, sStartX = getWidth()/2, sStartY = getHeight()/2;
	var shot;
	var moveSize = 10;
	var health = [], life = 10; // 10 = MAX (LIFE / 10 = #LIVES)
	var healthWidth = 205, healthHeight = 40;
	var healthBuffer = 10, barBuffer = 5; // hB = from edge, bB = between bars
	
	drawShip();
	fillHealthBars();
	keyDownMethod(movement);
	setTimer(shoot, 50);
	
	function drawShip() {
		ship = new Polygon(); // 15x16
		var scale = 2;
		ship.addPoint(sStartX + 0* scale, sStartY + 8* scale); ship.addPoint(sStartX + 1* scale, sStartY + 8* scale); 
		ship.addPoint(sStartX + 1* scale, sStartY + 12* scale); ship.addPoint(sStartX + 3* scale, sStartY + 10* scale);
		ship.addPoint(sStartX + 3* scale, sStartY + 6* scale); ship.addPoint(sStartX + 4* scale, sStartY + 6* scale); 
		ship.addPoint(sStartX + 4* scale, sStartY + 8* scale); ship.addPoint(sStartX + 6* scale, sStartY + 7* scale); 
		ship.addPoint(sStartX + 6* scale, sStartY + 4* scale); ship.addPoint(sStartX + 7* scale, sStartY + 4* scale); 
		ship.addPoint(sStartX + 7* scale, sStartY + 1* scale); ship.addPoint(sStartX + 8* scale, sStartY + 1* scale);
		ship.addPoint(sStartX + 8* scale, sStartY + 4* scale); ship.addPoint(sStartX + 9* scale, sStartY + 4* scale); 
		ship.addPoint(sStartX + 9* scale, sStartY + 7* scale); ship.addPoint(sStartX + 11* scale, sStartY + 8* scale); 
		ship.addPoint(sStartX + 11* scale, sStartY + 6* scale); ship.addPoint(sStartX + 12* scale, sStartY + 6* scale); 
		ship.addPoint(sStartX + 12* scale, sStartY + 10* scale); ship.addPoint(sStartX + 14* scale, sStartY + 12* scale);
		ship.addPoint(sStartX + 14* scale, sStartY + 8* scale); ship.addPoint(sStartX + 15* scale, sStartY + 8* scale); 
		ship.addPoint(sStartX + 15* scale, sStartY + 17* scale); ship.addPoint(sStartX + 14* scale, sStartY + 17* scale); 
		ship.addPoint(sStartX + 14* scale, sStartY + 16* scale); ship.addPoint(sStartX + 11* scale, sStartY + 13* scale); 
		ship.addPoint(sStartX + 11* scale, sStartY + 15* scale); ship.addPoint(sStartX + 9* scale, sStartY + 15* scale);
		ship.addPoint(sStartX + 9* scale, sStartY + 14* scale); ship.addPoint(sStartX + 8* scale, sStartY + 14* scale); 
		ship.addPoint(sStartX + 8* scale, sStartY + 17* scale); ship.addPoint(sStartX + 7* scale, sStartY + 17* scale); 
		ship.addPoint(sStartX + 7* scale, sStartY + 14* scale); ship.addPoint(sStartX + 6* scale, sStartY + 14* scale); 
		ship.addPoint(sStartX + 6* scale, sStartY + 15* scale); ship.addPoint(sStartX + 4* scale, sStartY + 15* scale);
		ship.addPoint(sStartX + 4* scale, sStartY + 13* scale); ship.addPoint(sStartX + 1* scale, sStartY + 16* scale); 
		ship.addPoint(sStartX + 1* scale, sStartY + 17* scale); ship.addPoint(sStartX + 0* scale, sStartY + 17* scale); 
		ship.setColor(Color.white);
		centerShip = new Circle(5);
		centerShip.setPosition(sStartX + ship.getWidth()/2, sStartY + ship.getHeight()/2);
		centerShip.setColor(Color.white);
		add(centerShip);
		add(ship);
		
		shot = new Circle(3); 
		shot.setPosition(centerShip.getX(), centerShip.getY());
		shot.setColor(Color.black);
		shot.setBorderColor(Color.white);
		add(shot);
	}
	
	function fillHealthBars(){
		for (var barN = 0; barN < 10; barN++) { // 10 health bars = FULL
			health[barN] = new Rectangle (15, 30);
			health[barN].setColor(Color.green);
			health[barN].setPosition(barBuffer + (barN * 20), getHeight() - healthHeight);  // 20 = bar(15) + barBuffer    
			add(health[barN]);
		}
	}
	
	function movement(e) {
		if (e.keyCode == Keyboard.UP || e.keyCode == Keyboard.letter('W')) {
			if (centerShip.getY() - moveSize - ship.getHeight()/2 >= 0) {
				centerShip.move(0, -moveSize);
				ship.move(0, -moveSize);
			}
		}
		else if (e.keyCode == Keyboard.LEFT || e.keyCode == Keyboard.letter('A')) {
			if (centerShip.getX() - moveSize - ship.getWidth()/2 >= 0) {
				centerShip.move(-moveSize, 0);
				ship.move(-moveSize, 0);
			}
		}
		else if (e.keyCode == Keyboard.DOWN || e.keyCode == Keyboard.letter('S')) {
			if (centerShip.getY() + moveSize + ship.getHeight()/2 + healthHeight + barBuffer <= getHeight()) {
				centerShip.move(0, moveSize);
				ship.move(0, moveSize);
			}
		}
		else if (e.keyCode == Keyboard.RIGHT || e.keyCode == Keyboard.letter('D')) {
			if (centerShip.getX() + moveSize + ship.getWidth()/2 <= getWidth()) {
				centerShip.move(moveSize, 0);
				ship.move(moveSize, 0);
			}
		}
	}
	function shoot() {
		shot.move(0, -moveSize);
		if (shot.getY() < 0) {
			shot.setPosition(centerShip.getX(), centerShip.getY());
			add(shot);
		}	
	}
}
</script>
	
	<br> <br> <br>
	<footer>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Footer
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </footer> 
</body>
</html>
