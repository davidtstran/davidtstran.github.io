<html>
<head>
	<link rel="stylesheet" href="/style.css">
	<title>Digging Game</title>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

	<script type="text/javascript" src="https://static.codehs.com/gulp/a207eaf74c9a65ef1504f82657de97532616341f/chs-js-lib/chs.js"></script>
</head>

<body>
	<header>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Header
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </header> <br> <br> <br>
	<h2>Click Start to Begin Game<br>Movement (Arrow Keys or WASD)<br></h2>
	<p align = "center">
		<input id = "start" type = "button" value = "Start" onclick = "start()"> <br> <br>
		<canvas width="400" height="500" class="codehs-editor-canvas" style="background-color:black"></canvas>
	</p>
	
<script>
function start() {
	removeAll(); // clear canvas
	
	var block;
	var BLOCK_SIZE = 25;
	var NUM_ROWS = 20; // top 4 are "sky"
	var B_PER_ROW = 16;
	var row;
	var BUFFER = 1;
	var digger;
	var DIGGER_SIZE = BLOCK_SIZE/2;
	var DIGGER_COLOR = new Color (105, 105, 105);
	
	generateWorld();
	keyDownMethod(movement);
	
	function generateWorld() {
		createGround();
		createDigger();
	}
	
	function createGround() {
		for (row = 0; row < NUM_ROWS; row++){
			for (var col = 0; col < B_PER_ROW; col++){
				block = new Rectangle (BLOCK_SIZE, BLOCK_SIZE);
				block.setPosition (col * BLOCK_SIZE, row * BLOCK_SIZE);
				groundColor();
				add (block);
			}
		}
	}
					
	function groundColor() {
		if (row >= 0 && row <= 3)
			block.setColor (new Color(135, 206, 250));
		else if (row >= 4 && row <= 7)
			block.setColor (new Color(255, 235, 205));
		else if (row >= 8 && row <= 11)
			block.setColor (new Color(255, 222, 173));
		else if (row >= 12 && row <= 15)
			block.setColor (new Color(244, 164, 96));
		else if (row >= 16 && row <= 19)
			block.setColor (new Color(205, 133, 63));
	}
	
	function createDigger() {
		digger = new Circle (DIGGER_SIZE);
		digger.setPosition (7 * BLOCK_SIZE + BLOCK_SIZE / 2, 3 * BLOCK_SIZE + BLOCK_SIZE / 2);
		digger.setColor (DIGGER_COLOR);
		add (digger);
	}
	
	function movement(e) {
		if (e.keyCode == Keyboard.UP || e.keyCode == Keyboard.letter('W')) {
			if (digger.getY() - BLOCK_SIZE > 2 * BLOCK_SIZE)
				digger.move(0, -BLOCK_SIZE);
		}
		else if (e.keyCode == Keyboard.LEFT || e.keyCode == Keyboard.letter('A')) {
			if (digger.getX() - BLOCK_SIZE > 0)
				digger.move(-BLOCK_SIZE, 0);
		}
		else if (e.keyCode == Keyboard.DOWN || e.keyCode == Keyboard.letter('S')) {
			if (digger.getY() + BLOCK_SIZE < getHeight())
				digger.move(0, BLOCK_SIZE);
		}
		else if (e.keyCode == Keyboard.RIGHT || e.keyCode == Keyboard.letter('D')) {
			if (digger.getX() + BLOCK_SIZE < getWidth())
				digger.move(BLOCK_SIZE, 0);
		}
	}
}
</script>

	<footer>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Footer
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </footer> 
</body>
</html>
