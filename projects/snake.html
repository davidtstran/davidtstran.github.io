<html>
<head>
	<link rel="stylesheet" href="/style.css">
	<title>Snake Game</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://static.codehs.com/gulp/a207eaf74c9a65ef1504f82657de97532616341f/chs-js-lib/chs.js"></script>
</head>
<body>
	<header>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Header
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </header> <br> <br> <br>
	<h2>Snake - Collect Food to Grow<br>Change Direction with Arrow Keys or WASD<br></h2>
	<h2 id = "size">Snake Size: 1</h2>
	<p align = "center">
		<input id = "start" type = "button" value = "Start" onclick = "start()"> <br> <br>
		<canvas width="500" height="500" class="codehs-editor-canvas" style="background-color:black"></canvas>
	</p>
	
<script>
function start() {
	removeAll(); // clear canvas
	
	var TIME = 50;
	var GRID_SIZE = 10; // 50x50 blocks
	var direction = "RIGHT"; // DEFAULT MOVE RIGHT
	var snakeHead;
	var snakeSize = 1;
	var food;
	var foodExists = false;

	createSnake();
	document.getElementById("size").innerHTML = "Snake Size: " + snakeSize.toString(10);
	setTimer(movement, TIME);
	setTimer(createFood, 1);
	keyDownMethod(changeDirection);
	
	function createSnake() {
		snakeHead = new Rectangle (GRID_SIZE, GRID_SIZE);
		var shX = Randomizer.nextInt(0, 49); // 50 blocks
		var shY = Randomizer.nextInt(0, 49); // 50 blocks
		snakeHead.setPosition(shX * GRID_SIZE, shY * GRID_SIZE);
		snakeHead.setColor(Color.white);
		add(snakeHead);
	}
	
	function changeDirection(e) {
		if (e.keyCode == Keyboard.UP || e.keyCode == Keyboard.letter('W'))
			direction = "UP";
		else if (e.keyCode == Keyboard.LEFT || e.keyCode == Keyboard.letter('A')) 
			direction = "LEFT";
		else if (e.keyCode == Keyboard.DOWN || e.keyCode == Keyboard.letter('S')) 
			direction = "DOWN";
		else if (e.keyCode == Keyboard.RIGHT || e.keyCode == Keyboard.letter('D')) 
			direction = "RIGHT";
	}
	
	function movement() {
		if (direction == "UP") {
			snakeHead.move(0, -GRID_SIZE);
			if (snakeHead.getY() < 0 - GRID_SIZE)
				dead();
		}
		else if (direction == "LEFT") {
			snakeHead.move(-GRID_SIZE, 0);
			if (snakeHead.getX() < 0 - GRID_SIZE)
				dead();
		}
		else if (direction == "DOWN") {
			snakeHead.move(0, GRID_SIZE);
			if (snakeHead.getY() >= getHeight())
				dead();
		}
		else if (direction == "RIGHT") {
			snakeHead.move(GRID_SIZE, 0);
			if (snakeHead.getX() >= getWidth())
				dead();
		}
	}
	
	function createFood() {
		if (foodExists == false){
			food = new Rectangle (GRID_SIZE, GRID_SIZE);
			var fX = Randomizer.nextInt(0, 49); // 50 blocks
			var fY = Randomizer.nextInt(0, 49); // 50 blocks
			food.setPosition(fX * GRID_SIZE, fY * GRID_SIZE);
			food.setColor(Color.red);
			add(food);	
			foodExists = true;
		}
		if ( (snakeHead.getX() == food.getX()) && (snakeHead.getY() == food.getY()) ){
			remove(food);
			snakeSize++;
			document.getElementById("size").innerHTML = "Snake Size: " + snakeSize.toString(10);
			foodExists = false;
		}
	}
	
	function dead() {
		stopTimer(movement);
		document.getElementById("size").innerHTML = "Died with Snake Size of " + snakeSize.toString(10);
	}
}
</script>
	
	<br> <br> <br>
	<footer>(<a href = "https://davidtstran.github.io" style="color:darkgray">Home</a>)
		David Tran Footer
		(<a href = "https://github.com/davidtstran" style="color:darkgray">GitHub</a>) </footer> 
</body>
</html>
